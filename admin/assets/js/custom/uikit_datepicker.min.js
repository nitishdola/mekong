!function(t){var e;window.UIkit&&(e=t(UIkit)),"function"==typeof define&&define.amd&&define("uikit-datepicker",["uikit"],function(){return e||t(UIkit)})}(function(t){"use strict";var e,a=!1;return t.component("datepicker",{defaults:{mobile:!1,weekstart:1,i18n:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},format:"DD.MM.YYYY",offsettop:5,maxDate:!1,minDate:!1,pos:"auto",addClass:!1,template:function(e,a){var i,o,n,s="";if(a.maxDate!==!1&&(i=isNaN(a.maxDate)?moment(a.maxDate,a.format):moment().add(a.maxDate,"days")),a.minDate!==!1&&(o=isNaN(a.minDate)?moment(a.minDate,a.format):moment().add(a.minDate-1,"days")),s+='<div class="uk-datepicker-nav uk-clearfix">',s+='<a href="" class="uk-datepicker-previous"></a>',s+='<a href="" class="uk-datepicker-next"></a>',t.formSelect){var r,d,u,p,c=(new Date).getFullYear(),h=[];for(n=0;n<a.i18n.months.length;n++)h.push(n==e.month?'<option value="'+n+'" selected>'+a.i18n.months[n]+"</option>":'<option value="'+n+'">'+a.i18n.months[n]+"</option>");for(r='<span class="uk-form-select">'+a.i18n.months[e.month]+'<select class="update-picker-month">'+h.join("")+"</select></span>",h=[],u=o?o.year():c-50,p=i?i.year():c+20,n=u;p>=n;n++)h.push(n==e.year?'<option value="'+n+'" selected>'+n+"</option>":'<option value="'+n+'">'+n+"</option>");d='<span class="uk-form-select">'+e.year+'<select class="update-picker-year">'+h.join("")+"</select></span>",s+='<div class="uk-datepicker-heading">'+r+" "+d+"</div>"}else s+='<div class="uk-datepicker-heading">'+a.i18n.months[e.month]+" "+e.year+"</div>";for(s+="</div>",s+='<table class="uk-datepicker-table">',s+="<thead>",n=0;n<e.weekdays.length;n++)e.weekdays[n]&&(s+="<th>"+e.weekdays[n]+"</th>");for(s+="</thead>",s+="<tbody>",n=0;n<e.days.length;n++)if(e.days[n]&&e.days[n].length){s+="<tr>";for(var m=0;m<e.days[n].length;m++)if(e.days[n][m]){var l=e.days[n][m],k=[];l.inmonth||k.push("uk-datepicker-table-muted"),l.selected&&k.push("uk-active"),i&&l.day>i&&k.push("uk-datepicker-date-disabled uk-datepicker-table-muted"),o&&o>l.day&&k.push("uk-datepicker-date-disabled uk-datepicker-table-muted"),s+='<td><a href="" class="'+k.join(" ")+'" data-date="'+l.day.format()+'">'+l.day.format("D")+"</a></td>"}s+="</tr>"}return s+="</tbody>",s+="</table>"}},boot:function(){t.$win.on("resize orientationchange",function(){a&&a.hide()}),t.$html.on("focus.datepicker.uikit","[data-uk-datepicker]",function(e){var a=t.$(this);if(!a.data("datepicker")){e.preventDefault();{t.datepicker(a,t.Utils.options(a.attr("data-uk-datepicker")))}a.trigger("focus")}}),t.$html.on("click.datepicker.uikit",function(i){var o=t.$(i.target);!a||o[0]==e[0]||o.data("datepicker")||o.parents(".uk-datepicker:first").length||a.hide()})},init:function(){if(t.support.touch&&!this.options.mobile&&this.element.attr("type","date"),!t.support.touch||"date"!=this.element.attr("type")||this.options.mobile){var i=this;this.current=this.element.val()?moment(this.element.val(),this.options.format):moment(),this.on("click focus",function(){a!==i&&i.pick(this.value?this.value:i.options.minDate?i.options.minDate:"")}).on("change",function(){i.element.val()&&!moment(i.element.val(),i.options.format).isValid()&&i.element.val(moment().format(i.options.format))}),e||(e=t.$('<div class="uk-dropdown uk-datepicker"></div>'),this.options.addClass&&e.addClass(this.options.addClass),e.on("click",".uk-datepicker-next, .uk-datepicker-previous, [data-date]",function(i){i.stopPropagation(),i.preventDefault();var o=t.$(this);return o.hasClass("uk-datepicker-date-disabled")?!1:void(o.is("[data-date]")?(a.element.val(moment(o.data("date")).format(a.options.format)).trigger("change"),e.removeClass("uk-dropdown-shown"),setTimeout(function(){e.removeClass("uk-dropdown-active")},280),a=!1):a.add(1*(o.hasClass("uk-datepicker-next")?1:-1),"months"))}),e.on("change",".update-picker-month, .update-picker-year",function(){var e=t.$(this);a[e.is(".update-picker-year")?"setYear":"setMonth"](Number(e.val()))}),$page_content.append(e))}},pick:function(i){var o=this.element.offset(),n=o.left-parseInt($page_content.css("margin-left")),s=o.top+$page_content.scrollTop()-$page_content.position().top,r={left:n,right:""};this.current=i?moment(i,this.options.format):moment(),this.initdate=this.current.format("YYYY-MM-DD"),this.update(),"right"==t.langdirection&&(r.right=window.innerWidth-(r.left+this.element.outerWidth()),r.left="");var d=s-this.element.outerHeight()+this.element.height()-this.options.offsettop-e.outerHeight(),u=s+this.element.outerHeight()+this.options.offsettop;r.top=u,"top"==this.options.pos?(r.top=d,e.addClass("uk-dropdown-up")):"auto"==this.options.pos&&$page_content.innerHeight()+$page_content.scrollTop()-u-e.outerHeight()<0&&d>=0&&(r.top=d,e.addClass("uk-dropdown-up")),r.minWidth=e.actual("outerWidth"),e.css(r).addClass("uk-dropdown-active uk-dropdown-shown"),this.trigger("show.uk.datepicker"),a=this},add:function(t,e){this.current.add(t,e),this.update()},setMonth:function(t){this.current.month(t),this.update()},setYear:function(t){this.current.year(t),this.update()},update:function(){var t=this.getRows(this.current.year(),this.current.month()),a=this.options.template(t,this.options);e.html(a),this.trigger("update.uk.datepicker")},getRows:function(t,e){var a=this.options,i=moment().format("YYYY-MM-DD"),o=[31,t%4===0&&t%100!==0||t%400===0?29:28,31,30,31,30,31,31,30,31,30,31][e],n=new Date(t,e,1).getDay(),s={month:e,year:t,weekdays:[],days:[]},r=[];s.weekdays=function(){for(var t=0,e=[];7>t;t++){for(var i=t+(a.weekstart||0);i>=7;)i-=7;e.push(a.i18n.weekdays[i])}return e}(),a.weekstart&&a.weekstart>0&&(n-=a.weekstart,0>n&&(n+=7));for(var d=o+n,u=d;u>7;)u-=7;d+=7-u;for(var p,c,h,m,l,k=0,f=0;d>k;k++)p=new Date(t,e,1+(k-n)),c=a.mindate&&p<a.mindate||a.maxdate&&p>a.maxdate,l=!(n>k||k>=o+n),p=moment(p),h=this.initdate==p.format("YYYY-MM-DD"),m=i==p.format("YYYY-MM-DD"),r.push({selected:h,today:m,disabled:c,day:p,inmonth:l}),7===++f&&(s.days.push(r),r=[],f=0);return s},hide:function(){a&&a===this&&(e.removeClass("uk-dropdown-shown"),setTimeout(function(){e.removeClass("uk-dropdown-active uk-dropdown-up")},280),a=!1,this.trigger("hide.uk.datepicker"))}}),t.Utils.moment=moment(),t.datepicker});